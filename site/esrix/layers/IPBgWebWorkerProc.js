importScripts("Filters.js");self.addEventListener("message",function(a){a=a.data;switch(a.cmd){case "applyCBFilter":self._applyCBFilter(a.wid,a.params);break;case "getImage":self._getImage(a.wid,a.params);break;case "stop":self.close()}a.closeOnComplete&&self.close()},!1);
self._applyCBFilter=function(a,b){b.lookupTable?Filters.CBFilter.applyContrastBrightnessLUT(b.imageData.data,b.lookupTable):Filters.CBFilter.applyContrastBrightness(b.imageData.data,b.contrast,b.brightness);self.postMessage({wid:a,result:{imageData:b.imageData}})};self._getImage=function(a,b){var c=new XMLHttpRequest;c.open("GET",b.imageUrl,!0);c.send(null)};
